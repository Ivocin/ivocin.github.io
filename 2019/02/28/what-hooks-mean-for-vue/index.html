<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[译] Hooks 对 Vue 而言意味着什么 - 清秋的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="清秋的博客"><meta name="msapplication-TileImage" content="/images/mylogo.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="清秋的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="原文地址：What Hooks Mean for Vue 原文作者：Sarah Drasner 译文出自：掘金翻译计划 本文永久链接：https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;xitu&amp;#x2F;gold-miner&amp;#x2F;blob&amp;#x2F;master&amp;#x2F;TODO1&amp;#x2F;what-hooks-mean-for-vue.md 译者：Ivocin 校对者：LeoYang, TUARAN   不要把 Hooks 和 Vue 的生命"><meta property="og:type" content="blog"><meta property="og:title" content="[译] Hooks 对 Vue 而言意味着什么"><meta property="og:url" content="https://ivocin.github.io/2019/02/28/what-hooks-mean-for-vue/"><meta property="og:site_name" content="清秋的博客"><meta property="og:description" content="原文地址：What Hooks Mean for Vue 原文作者：Sarah Drasner 译文出自：掘金翻译计划 本文永久链接：https:&amp;#x2F;&amp;#x2F;github.com&amp;#x2F;xitu&amp;#x2F;gold-miner&amp;#x2F;blob&amp;#x2F;master&amp;#x2F;TODO1&amp;#x2F;what-hooks-mean-for-vue.md 译者：Ivocin 校对者：LeoYang, TUARAN   不要把 Hooks 和 Vue 的生命"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ivocin.github.io/images/hmtv.png"><meta property="article:published_time" content="2019-02-28T04:12:12.000Z"><meta property="article:modified_time" content="2021-03-13T15:26:29.388Z"><meta property="article:author" content="清秋"><meta property="article:tag" content="Translation"><meta property="article:tag" content="Hooks"><meta property="article:tag" content="Vue"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/images/hmtv.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ivocin.github.io/2019/02/28/what-hooks-mean-for-vue/"},"headline":"[译] Hooks 对 Vue 而言意味着什么","image":["https://ivocin.github.io/images/hmtv.png"],"datePublished":"2019-02-28T04:12:12.000Z","dateModified":"2021-03-13T15:26:29.388Z","author":{"@type":"Person","name":"清秋"},"description":"原文地址：What Hooks Mean for Vue 原文作者：Sarah Drasner 译文出自：掘金翻译计划 本文永久链接：https:&#x2F;&#x2F;github.com&#x2F;xitu&#x2F;gold-miner&#x2F;blob&#x2F;master&#x2F;TODO1&#x2F;what-hooks-mean-for-vue.md 译者：Ivocin 校对者：LeoYang, TUARAN   不要把 Hooks 和 Vue 的生命"}</script><link rel="canonical" href="https://ivocin.github.io/2019/02/28/what-hooks-mean-for-vue/"><link rel="icon" href="/images/mylogo.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?e84c7e175906c3ea9fb7d904d291b461";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/mylogo.png" alt="清秋的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="http://github.com/ivocin"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/images/hmtv.png" alt="[译] Hooks 对 Vue 而言意味着什么"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2019-02-28T04:12:12.000Z" title="2019/2/28下午12:12:12">2019-02-28</time>发表</span><span class="level-item"><time dateTime="2021-03-13T15:26:29.388Z" title="2021/3/13下午11:26:29">2021-03-13</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/Front-End/">Front-End</a><span> / </span><a class="link-muted" href="/categories/Front-End/Vue/">Vue</a></span><span class="level-item">19 分钟读完 (大约2775个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">[译] Hooks 对 Vue 而言意味着什么</h1><div class="content"><blockquote>
<ul>
<li>原文地址：<a target="_blank" rel="noopener" href="https://css-tricks.com/what-hooks-mean-for-vue/">What Hooks Mean for Vue</a></li>
<li>原文作者：<a target="_blank" rel="noopener" href="https://css-tricks.com/author/sdrasner/">Sarah Drasner</a></li>
<li>译文出自：<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner">掘金翻译计划</a></li>
<li>本文永久链接：<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner/blob/master/TODO1/what-hooks-mean-for-vue.md">https://github.com/xitu/gold-miner/blob/master/TODO1/what-hooks-mean-for-vue.md</a></li>
<li>译者：<a target="_blank" rel="noopener" href="https://github.com/Ivocin">Ivocin</a></li>
<li>校对者：<a target="_blank" rel="noopener" href="https://github.com/LeoooY">LeoYang</a>, <a target="_blank" rel="noopener" href="https://github.com/TUARAN">TUARAN</a></li>
</ul>
</blockquote>
<p>不要把 Hooks 和 Vue 的<a target="_blank" rel="noopener" href="https://css-tricks.com/intro-to-vue-3-vue-cli-lifecycle-hooks/#article-header-id-1">生命周期钩子（Lifecycle Hooks）</a> 弄混了，<a target="_blank" rel="noopener" href="https://reactjs.org/docs/hooks-intro.html">Hooks</a> 是 React 在 V16.7.0-alpha 版本中引入的，而且几天后 Vue 发布了其概念验证版本。虽然 Hooks 是由 React 提出的，它是一个对各 JavaScript 框架生态系统都有价值的、重要的组合机制，因此我们今天会花一点时间讨论 Hooks 意味着什么。</p>
<p>Hooks 主要是对模式的复用提供了一种更明确的思路 —— 避免重写组件本身，并允许有状态逻辑的不同部分能无缝地进行协同工作。</p>
<span id="more"></span>

<h3 id="最初的问题"><a href="#最初的问题" class="headerlink" title="最初的问题"></a>最初的问题</h3><p>就 React 而言，问题在于：在表达状态的概念时，类是最常见的组件形式。无状态函数式组件也非常受欢迎，但由于它们只能单纯地渲染，所以它们的用途仅限于展示任务。</p>
<p>类本身存在一些问题。例如，随着 React 变得越来越流行，类的问题也普遍成为新手的阻碍。开发者为了理解 React，也必须理解类。绑定使得代码冗长且可读性差，并且需要理解 JavaScript 中的 <code>this</code>。<a target="_blank" rel="noopener" href="https://reactjs.org/docs/hooks-intro.html#classes-confuse-both-people-and-machines">这里</a>还讨论了使用类所带来的一些优化障碍。</p>
<p>在逻辑复用方面，我们通常使用 render props 和高阶组件等模式。但使用这些模式后会发现自己处于类似的<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pyramid_of_doom_(programming)">“厄运金字塔”</a>中 —— 样式实现地狱，即过度使用嵌套可能会导致组件难以维护。这导致我想对 Dan Abramov 像喝醉了一样大吼大叫，没有人想要那样。</p>
<p>Hooks 允许我们使用函数调用来定义组件的有状态逻辑，从而解决这些问题。这些函数调用变得更具有组合性、可复用性，并且允许我们在使用函数式组件的同时能够访问和维护状态。React 发布 Hooks 时，人们很兴奋 —— 下面你可以看到 Hooks 展示的一些优势，关于它们如何减少代码和重复：</p>
<blockquote>
<p>将 <a target="_blank" rel="noopener" href="https://twitter.com/dan_abramov?ref_src=twsrc%5Etfw">@dan_abramov</a> 的代码（来自 <a target="_blank" rel="noopener" href="https://twitter.com/hashtag/ReactConf2018?src=hash&ref_src=twsrc%5Etfw">#ReactConf2018</a>）可视化，你能看到 React Hooks 为我们带来的好处。<a target="_blank" rel="noopener" href="https://t.co/dKyOQsG0Gd">pic.twitter.com/dKyOQsG0Gd</a></p>
<p>— Pavel Prichodko (@prchdk) <a target="_blank" rel="noopener" href="https://twitter.com/prchdk/status/1056960391543062528?ref_src=twsrc%5Etfw">2018 年 10 月 29 日</a></p>
</blockquote>
<p>在维护方面，简单性是关键，Hooks 提供了一种单一的、函数式的方式来实现逻辑共享，并且可能代码量更小。</p>
<h3 id="为什么-Vue-中需要-Hooks？"><a href="#为什么-Vue-中需要-Hooks？" class="headerlink" title="为什么 Vue 中需要 Hooks？"></a>为什么 Vue 中需要 Hooks？</h3><p>读到这里你肯定想知道 Hooks 在 Vue 中必须提供什么。这似乎是一个不需要解决的问题。毕竟，类并不是 Vue 主要使用的模式。Vue 提供无状态函数式组件（如果需要它们），但为什么我们需要在函数式组件中携带状态呢？<a target="_blank" rel="noopener" href="https://css-tricks.com/using-mixins-vue-js/">我们有 mixins</a> 用于组合可以在多个组件复用的相同逻辑。问题解决了。</p>
<p>我想到了同样的事情，但在与 Evan You 交谈后，他指出了我忽略的一个主要用例：mixins 不能相互消费和使用状态，但 Hooks 可以。这意味着如果我们需要链式封装逻辑，可以使用 Hooks。</p>
<p>Hooks 实现了 mixins 的功能，但避免了 mixins 带来的两个主要问题：</p>
<ul>
<li>  允许相互传递状态。</li>
<li>  明确指出逻辑来自哪里。</li>
</ul>
<p>如果使用多个 mixins，我们不清楚哪个属性是由哪个 mixins 提供的。使用 Hooks，函数的返回值会记录消费的值。</p>
<p>那么，这在 Vue 中如何运行呢？我们之前提到过，在使用 Hooks 时，逻辑在函数调用时表达从而可复用。在 Vue 中，这意味着我们可以将数据调用、方法调用或计算属性调用封装到另一个自定义函数中，并使它们可以自由组合。数据、方法和计算属性现在可用于函数式组件了。</p>
<h3 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h3><p>让我们来看一个非常简单的 hook，以便我们在继续学习 Hooks 中的组合例子之前理解构建块。</p>
<h4 id="useWat"><a href="#useWat" class="headerlink" title="useWat?"></a>useWat?</h4><p>好的，Vue Hooks 和 React Hooks 之间存在交叉部分。使用 <code>use</code> 作为前缀是 React 的约定，所以如果你在 React 中查找 Hooks，你会发现 Hooks 的名称都会像 <code>useState</code>、<code>useEffect</code> 等。<a target="_blank" rel="noopener" href="https://reactjs.org/docs/hooks-overview.html#-state-hook">更多信息可以查看这里。</a></p>
<p>在 <a target="_blank" rel="noopener" href="https://codesandbox.io/s/jpqo566289">Evan 的在线 demo 里</a>，你可以看到他在何处访问 <code>useState</code> 和 <code>useEffect</code> 并用于 render 函数。</p>
<p>如果你不熟悉 Vue 中的 render 函数，那么看一看<a target="_blank" rel="noopener" href="https://vuejs.org/v2/guide/render-function.html">官网文档</a>可能会有所帮助。</p>
<p>但是当我们使用 Vue 风格的 Hooks 时，我们会如何命名呢 —— 你猜对了 —— 比如：<code>useData</code>，<code>useComputed</code>等。</p>
<p>因此，为了让我们看看如何在 Vue 中使用 Hooks，我创建了一个示例应用程序供我们探索。</p>
<p>详见视频演示：<a target="_blank" rel="noopener" href="https://css-tricks.com/wp-content/uploads/2019/01/hooks-demo-shorter.mp4">https://css-tricks.com/wp-content/uploads/2019/01/hooks-demo-shorter.mp4</a></p>
<p><a target="_blank" rel="noopener" href="https://sdras.github.io/vue-hooks-foodapp/">演示网站</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/sdras/vue-hooks-foodapp">GitHub 仓库</a></p>
<p>在 src/hooks 文件夹中，我创建了一个 hook，它在 <code>useMounted</code> hook 上阻止了滚动，并在 <code>useDestroyed</code> 上重新启用滚动。这有助于我在打开查看内容的对话框时暂停页面滚动，并在查看对话框结束时再次允许滚动。这是一个好的抽象功能，因为它在整个应用程序中可能会多次使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useDestroyed, useMounted &#125; from &quot;vue-hooks&quot;;</span><br><span class="line"></span><br><span class="line">export function preventscroll() &#123;</span><br><span class="line">  const preventDefault &#x3D; (e) &#x3D;&gt; &#123;</span><br><span class="line">    e &#x3D; e || window.event;</span><br><span class="line">    if (e.preventDefault)</span><br><span class="line">      e.preventDefault();</span><br><span class="line">    e.returnValue &#x3D; false;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; keycodes for left, up, right, down</span><br><span class="line">  const keys &#x3D; &#123; 37: 1, 38: 1, 39: 1, 40: 1 &#125;;</span><br><span class="line"></span><br><span class="line">  const preventDefaultForScrollKeys &#x3D; (e) &#x3D;&gt; &#123;</span><br><span class="line">    if (keys[e.keyCode]) &#123;</span><br><span class="line">      preventDefault(e);</span><br><span class="line">      return false;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useMounted(() &#x3D;&gt; &#123;</span><br><span class="line">    if (window.addEventListener) &#x2F;&#x2F; older FF</span><br><span class="line">      window.addEventListener(&#39;DOMMouseScroll&#39;, preventDefault, false);</span><br><span class="line">    window.onwheel &#x3D; preventDefault; &#x2F;&#x2F; modern standard</span><br><span class="line">    window.onmousewheel &#x3D; document.onmousewheel &#x3D; preventDefault; &#x2F;&#x2F; older browsers, IE</span><br><span class="line">    window.touchmove &#x3D; preventDefault; &#x2F;&#x2F; mobile</span><br><span class="line">    window.touchstart &#x3D; preventDefault; &#x2F;&#x2F; mobile</span><br><span class="line">    document.onkeydown &#x3D; preventDefaultForScrollKeys;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  useDestroyed(() &#x3D;&gt; &#123;</span><br><span class="line">    if (window.removeEventListener)</span><br><span class="line">      window.removeEventListener(&#39;DOMMouseScroll&#39;, preventDefault, false);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;firefox</span><br><span class="line">    window.addEventListener(&#39;DOMMouseScroll&#39;, (e) &#x3D;&gt; &#123;</span><br><span class="line">      e.stopPropagation();</span><br><span class="line">    &#125;, true);</span><br><span class="line"></span><br><span class="line">    window.onmousewheel &#x3D; document.onmousewheel &#x3D; null;</span><br><span class="line">    window.onwheel &#x3D; null;</span><br><span class="line">    window.touchmove &#x3D; null;</span><br><span class="line">    window.touchstart &#x3D; null;</span><br><span class="line">    document.onkeydown &#x3D; null;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>然后我们可以在像 AppDetails.vue 一样的 Vue 组件中调用它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; preventscroll &#125; from &quot;.&#x2F;..&#x2F;hooks&#x2F;preventscroll.js&quot;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  ...</span><br><span class="line">  hooks() &#123;</span><br><span class="line">    preventscroll();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>我们不仅可以在该组件中使用它，还可以在整个应用程序中使用相同的功能！</p>
<h4 id="能够相互理解的两个-Hooks"><a href="#能够相互理解的两个-Hooks" class="headerlink" title="能够相互理解的两个 Hooks"></a>能够相互理解的两个 Hooks</h4><p>我们之前提到过，Hooks 和 mixins 之间的主要区别之一是 Hooks 实际上可以互相传值。让我们看一下这个简单但有点不自然的例子。</p>
<p>在我们的应用程序中，我们需要在一个可复用的 hook 中进行计算，还有一些需要使用该计算结果的东西。在我们的例子中，我们有一个 hook，它获取窗口宽度并将其传递给动画，让它知道只有当我们在更大的屏幕上时才会触发。</p>
<p>详见视频演示：<a target="_blank" rel="noopener" href="https://css-tricks.com/wp-content/uploads/2019/01/hook-logo.mp4">https://css-tricks.com/wp-content/uploads/2019/01/hook-logo.mp4</a></p>
<p>第一个 hook:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useData, useMounted &#125; from &#39;vue-hooks&#39;;</span><br><span class="line"></span><br><span class="line">export function windowwidth() &#123;</span><br><span class="line">  const data &#x3D; useData(&#123;</span><br><span class="line">    width: 0</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  useMounted(() &#x3D;&gt; &#123;</span><br><span class="line">    data.width &#x3D; window.innerWidth</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; this is something we can consume with the other hook</span><br><span class="line">  return &#123;</span><br><span class="line">    data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，在第二个 hook 中，我们使用它来创建一个触发动画逻辑的条件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; the data comes from the other hook</span><br><span class="line">export function logolettering(data) &#123;</span><br><span class="line">  useMounted(function () &#123;</span><br><span class="line">    &#x2F;&#x2F; this is the width that we stored in data from the previous hook</span><br><span class="line">    if (data.data.width &gt; 1200) &#123;</span><br><span class="line">      &#x2F;&#x2F; we can use refs if they are called in the useMounted hook</span><br><span class="line">      const logoname &#x3D; this.$refs.logoname;</span><br><span class="line">      Splitting(&#123; target: logoname, by: &quot;chars&quot; &#125;);</span><br><span class="line"></span><br><span class="line">      TweenMax.staggerFromTo(&quot;.char&quot;, 5,</span><br><span class="line">        &#123;</span><br><span class="line">          opacity: 0,</span><br><span class="line">          transformOrigin: &quot;50% 50% -30px&quot;,</span><br><span class="line">          cycle: &#123;</span><br><span class="line">            color: [&quot;red&quot;, &quot;purple&quot;, &quot;teal&quot;],</span><br><span class="line">            rotationY(i) &#123;</span><br><span class="line">              return i * 50</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>

<p>然后，在组件内部，我们将一个 hook 作为参数传递给另一个 hook：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; logolettering &#125; from &quot;.&#x2F;..&#x2F;hooks&#x2F;logolettering.js&quot;;</span><br><span class="line">import &#123; windowwidth &#125; from &quot;.&#x2F;..&#x2F;hooks&#x2F;windowwidth.js&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  hooks() &#123;</span><br><span class="line">    logolettering(windowwidth());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>现在我们可以在整个应用程序中使用 Hooks 来编写逻辑！再提一下，这是一个用于演示目的不太自然的例子，但你可以看到这对于大型应用程序，将逻辑保存在较小的、可复用的函数中是有效的。</p>
<h3 id="未来的计划"><a href="#未来的计划" class="headerlink" title="未来的计划"></a>未来的计划</h3><p><strong>Vue Hooks 现在已经可以与 Vue 2.x 一起使用了，但仍然是实验性的</strong>。我们计划将 Hooks 集成到 Vue 3 中，但在我们自己的实现中可能会偏离 React 的 API。我们发现 React Hooks 非常鼓舞人心，正在考虑如何向 Vue 开发人员介绍其优势。我们想以一种符合 Vue 习惯用法的方式来做，所以还有很多实验要做。</p>
<p>你可以查看<a target="_blank" rel="noopener" href="https://github.com/yyx990803/vue-hooks">这个仓库</a>作为起步。Hooks 可能会成为 mixins 的替代品，所以虽然这个功能还处于早期阶段，但是一个在此期间探索其概念是有好处的。</p>
<p><strong>（真诚地感谢 Evan You 和 Dan Abramov 为本文审阅。）</strong></p>
<blockquote>
<p>如果发现译文存在错误或其他需要改进的地方，欢迎到 <a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner">掘金翻译计划</a> 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 <strong>本文永久链接</strong> 即为本文在 GitHub 上的 MarkDown 链接。</p>
</blockquote>
<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner">掘金翻译计划</a> 是一个翻译优质互联网技术文章的社区，文章来源为 <a target="_blank" rel="noopener" href="https://juejin.im/">掘金</a> 上的英文分享文章。内容覆盖 <a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#android">Android</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#ios">iOS</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E5%89%8D%E7%AB%AF">前端</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E5%90%8E%E7%AB%AF">后端</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E5%8C%BA%E5%9D%97%E9%93%BE">区块链</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E4%BA%A7%E5%93%81">产品</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E8%AE%BE%E8%AE%A1">设计</a>、<a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner#%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD">人工智能</a>等领域，想要查看更多优质译文请持续关注 <a target="_blank" rel="noopener" href="https://github.com/xitu/gold-miner">掘金翻译计划</a>、<a target="_blank" rel="noopener" href="http://weibo.com/juejinfanyi">官方微博</a>、<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/juejinfanyi">知乎专栏</a>。</p>
</blockquote>
</div><div class="article-licensing box"><div class="licensing-title"><p>[译] Hooks 对 Vue 而言意味着什么</p><p><a href="https://ivocin.github.io/2019/02/28/what-hooks-mean-for-vue/">https://ivocin.github.io/2019/02/28/what-hooks-mean-for-vue/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>清秋</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2019-02-28</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-03-13</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Translation/">Translation</a><a class="link-muted mr-2" rel="tag" href="/tags/Hooks/">Hooks</a><a class="link-muted mr-2" rel="tag" href="/tags/Vue/">Vue</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/images/alipay.jpeg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/images/wechat.jpeg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/03/12/why-i-write-css-in-javascript/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[译] 为什么我用 JavaScript 来编写 CSS</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/02/02/front-end-performance-checklist-2019-pdf-pages-4/"><span class="level-item">[译] 2019 前端性能优化年度总结 — 第四部分</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
            id: '50b68d9e44f4b79d59f2df7ca34d3d53',
            repo: 'BlogComment',
            owner: 'Ivocin',
            oauth: {
                client_id: 'clinet',
                client_secret: '64bc865f757ffec352d5288ad500b6f4707cd8a7',
            },
            perPage: 20,
            maxCommentHeight: 250
        })
        gitment.render('comment-container')</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#最初的问题"><span class="level-left"><span class="level-item">1</span><span class="level-item">最初的问题</span></span></a></li><li><a class="level is-mobile" href="#为什么-Vue-中需要-Hooks？"><span class="level-left"><span class="level-item">2</span><span class="level-item">为什么 Vue 中需要 Hooks？</span></span></a></li><li><a class="level is-mobile" href="#例子"><span class="level-left"><span class="level-item">3</span><span class="level-item">例子</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#useWat"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">useWat?</span></span></a></li><li><a class="level is-mobile" href="#能够相互理解的两个-Hooks"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">能够相互理解的两个 Hooks</span></span></a></li></ul></li><li><a class="level is-mobile" href="#未来的计划"><span class="level-left"><span class="level-item">4</span><span class="level-item">未来的计划</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/mylogo.png" alt="清秋的博客" height="28"></a><p class="is-size-7"><span>&copy; 2021 清秋</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>